{{define "header"}}
<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- Meta -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Title -->
    <title>Car Forum</title>

    <!-- Styles -->
    <link rel="stylesheet" href="/static/stylesheets/style.css">
    <link rel="icon" type="image/x-icon" href="/static/assets/favicon.ico">
    <link rel="logo" type="image/png" href="/static/assets/logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer">

  </head>
  
  <body>
    <header>

      <nav>

        <ul class="nav-list">
          <li class="logo"><a href="/"><img src="/static/assets/logo.png" alt="Car Forum Logo"></a></li>
          <input type="checkbox" id="check">
          <span class="menu">
            <li class="nav-link">
              <a href="/"><svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="#e8eaed"><path d="M180-120q-25 0-42.5-17.5T120-180v-76l160-142v278H180Zm140 0v-160h320v160H320Zm360 0v-328L509-600l121-107 190 169q10 9 15 20.5t5 24.5v313q0 25-17.5 42.5T780-120H680ZM120-310v-183q0-13 5-25t15-20l300-266q8-8 18.5-11.5T480-819q11 0 21.5 3.5T520-804l80 71-480 423Z"/></svg>Home</a>
            </li>
    
            <li class="nav-link">
              <a href="/posts"><svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="#e8eaed"><path d="M280-240q-17 0-28.5-11.5T240-280v-80h520v-360h80q17 0 28.5 11.5T880-680v600L720-240H280ZM80-280v-560q0-17 11.5-28.5T120-880h520q17 0 28.5 11.5T680-840v360q0 17-11.5 28.5T640-440H240L80-280Zm520-240v-280H160v280h440Zm-440 0v-280 280Z"/></svg>Posts</a>
            </li>
    
            <li class="nav-link">
              <a href="/categories"><svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="#e8eaed"><path d="M480-400 40-640l440-240 440 240-440 240Zm0 160L63-467l84-46 333 182 333-182 84 46-417 227Zm0 160L63-307l84-46 333 182 333-182 84 46L480-80Zm0-411 273-149-273-149-273 149 273 149Zm0-149Z"/></svg>Categories</a>
              <div class="dropdown">
                <ul>
                  <li class="dropdown-link"><a href="/categories/1">Category 1</a></li>
                  <li class="dropdown-link"><a href="/categories/2">Category 2</a></li>
                  <li class="dropdown-link"><a href="/categories/3">Category 3</a></li>
                  <div class="arrow"></div>
                </ul>
              </div>

              <i class="fas fa-caret-down" id="open-collapse"></i>

              <div class="collapsible-menu">
                <div><a href="/categories/1">Category 1</a></div>
                <div><a href="/categories/2">Category 2</a></div>
                <div><a href="/categories/3">Category 3</a></div>
                <div><a href="/categories/4">Category 4</a></div>
              </div>

            </li>
            <label for="check" class="close-menu"><i class="fas fa-times"></i></label>
          </span>
          <label for="check" class="open-menu"><i class="fas fa-bars"></i></label>
        </ul>

        <div class="nav-btn">
          <a href="/logout" id="logout">
            <button class="Btn">
              <div class="sign"><svg viewBox="0 0 512 512"><path d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"></path></svg></div>
              <div class="text">Logout</div>
            </button>
          </a>
      
          <a href="/login" id="login">
            <button class="Btn">
              <div class="sign"><svg viewBox="0 0 512 512"><path d="M217.9 105.9L340.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L217.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1L32 320c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM352 416l64 0c17.7 0 32-14.3 32-32l0-256c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0c53 0 96 43 96 96l0 256c0 53-43 96-96 96l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"></path></svg></div>
              <div class="text">Login</div>
            </button>
          </a>
      
          <a href="/register" id="register" class="btn-outline" style="color: white; font-weight: bold">Register</a>
        </div>

      </nav>

    </header>

    <main style="padding: 20px">
      {{end}}
    </main>
      
    <!-- footer -->
    {{define "footer"}}
      <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>About Us</h3>
                <p>A brief description of your forum or community.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="/posts">Posts</a></li>
                    <li><a href="/categories">Categories</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; <span id="year"></span> Car Forum. All rights reserved.</p>
            <script>
                document.getElementById("year").textContent = new Date().getFullYear();
            </script>
        </div>
      </footer>
  </body>

  <script>
    const cookie = document.cookie.includes("sessionId");
    document.getElementById("logout").style.display = cookie ? "block" : "none";
    document.getElementById("login").style.display = cookie ? "none" : "block";
    document.getElementById("register").style.display = cookie
      ? "none"
      : "block";

    const formatDate = document.querySelectorAll(".date");
    formatDate.forEach((date) => {
      date.textContent = new Date(date.textContent).toLocaleDateString(
        "en-US",
        {
          year: "numeric",
          month: "short",
          day: "numeric",
        }
      );
    });

    const openCollapse = document.getElementById("open-collapse");

    openCollapse.addEventListener("click", () => {
      const collapsibleMenu = document.querySelector(".collapsible-menu");
      collapsibleMenu.classList.toggle("open-collapsible-menu");
    });

    const formatTime = document.querySelectorAll(".time");

    // turn it to 2 minutes ago, 3 hours ago, etc

    formatTime.forEach((time) => {
      const date = new Date(time.textContent);
      const now = new Date();
      const diff = now - date;

      const seconds = Math.floor(diff / 1000);
      const minutes = Math.floor(seconds / 60);
      const hours = Math.floor(minutes / 60);
      const days = Math.floor(hours / 24);

      if (days > 0) {
        time.textContent = `${days} days ago`;
      } else if (hours > 0) {
        time.textContent = `${hours} hours ago`;
      } else if (minutes > 0) {
        time.textContent = `${minutes} minutes ago`;
      } else {
        time.textContent = `${seconds} seconds ago`;
      }
    });
  </script>
</html>
{{end}}
